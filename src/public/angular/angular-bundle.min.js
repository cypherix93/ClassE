var AngularApp=angular.module("AngularApp",["ngSanitize","ngRoute","ngAnimate","ngMessages","ui.bootstrap","toastr"]);AngularApp.config(["$httpProvider",function(e){e.interceptors.push(["$location",function(e){return{responseError:function(t){404===t.status&&e.path("/error/404")}}}])}]),AngularApp.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode(!1),e.when("/",{templateUrl:"views/home/index.html"}).when("/:base/:sub",{templateUrl:function(e){return"views/"+e.base+"/"+e.sub+".html"}}).when("/:base",{templateUrl:function(e){return"views/"+e.base+"/index.html"}})}]),AngularApp.run(["$rootScope","ConfigSvc","IdentitySvc","ModalSvc",function(e,t,n,o){t.getAppMeta().then(function(t){e.AppMeta={Name:t.data.name,Version:t.data.version,Description:t.data.description,Copyright:t.data.copyright,Authors:t.data.authors}}),e.PageName="Home",e.IdentitySvc=n,e.ModalSvc=o,o.initGlobalModals()}]),AngularApp.service("AuthSvc",["$q","$http","IdentitySvc",function(e,t,n){var o=this;o.loginUser=function(o,r){var s=e.defer();return t.post("http://localhost:3960/auth/login",{email:o,password:r}).success(function(e){e.success||s.resolve({success:!0,message:e.message}),n.currentUser=e.data,s.resolve({success:!0})}),s.promise}}]),AngularApp.service("IdentitySvc",function(){var e=this;e.currentUser=void 0,e.isAuthenticated=function(){return!!e.currentUser}}),AngularApp.service("ConfigSvc",["$http",function(e){var t=this;t.getAppMeta=function(){return e.get("angular/meta.json")}}]),AngularApp.service("ModalSvc",["$q","$http","$compile","$rootScope",function(e,t,n,o){var r=this,s=function(e,t){var r=this;r.element=$(e),r.state="Default",r.open=function(){r.element.modal("show")},r.close=function(){r.element.modal("hide")};var s=r.element;s.modal({show:!1}),s.width(t.width),s.on("show",function(){s.css("margin-left",-(s.width()/2)),t.onOpen&&t.onOpen(s)}),s.on("hidden",function(){t.onClose&&t.onClose(s)}),r.element=n(s)(o)};r.createModal=function(n,o){var r=e.defer();return t.get(n).success(function(e){var t=new s(e,o||{width:600});r.resolve(t)}),r.promise},r.modals={},r.initGlobalModals=function(){r.createModal("views/_shared/auth/login.html").then(function(e){r.modals.Login=e})}}]),AngularApp.controller("LoginModalCtrl",["$scope","AuthSvc","IdentitySvc","toastr",function(e,t,n,o){e.doLogin=function(){e.email&&e.password&&t.loginUser(e.email,e.password).then(function(e){e.success||o.error(e.message),o.success("Welcome back "+n.email)})}}]);
//# sourceMappingURL=angular-bundle.min.js.map

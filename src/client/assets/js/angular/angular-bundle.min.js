var AngularApp=angular.module("AngularApp",["ngSanitize","ngAnimate","ngMessages","ui.router","ui.bootstrap","toastr"]);AngularApp.config(["$httpProvider",function(e){e.defaults.withCredentials=!0,e.interceptors.push(["$location",function(e){return{responseError:function(r){404===r.status&&e.path("/error/404")}}}])}]),AngularApp.config(["toastrConfig",function(e){e.autoDismiss=!0,e.positionClass="toast-bottom-center",e.preventOpenDuplicates=!0}]),AngularApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,r,t){t.html5Mode(!1),e.state("home",{url:"/",templateUrl:"views/home/index.html"}),e.state("error",{url:"/error/:status",templateUrl:function(e){return"views/error/"+e.status+".html"}})}]),AngularApp.run(["$rootScope","ConfigService","IdentityService","AuthService","ModalService",function(e,r,t,n,o){r.getAppMeta().then(function(r){e.AppMeta={Name:r.data.name,Version:r.data.version,Description:r.data.description,Copyright:r.data.copyright,Authors:r.data.authors}}),e.PageName="Home",n.bootstrapSessionUser(),o.initGlobalModals()}]),AngularApp.service("AuthService",["$q","$window","ApiService","IdentityService",function(e,r,t,n){var o=this;o.bootstrapSessionUser=function(){t.get("/auth/me").success(function(e){e.success&&(n.currentUser=e.data)})},o.registerUser=function(r){var n=e.defer();return t.post("/auth/register",r).success(function(e){n.resolve(e)}),n.promise},o.loginUser=function(o,s){var i=e.defer();return t.post("/auth/login",{email:o,password:s}).success(function(e){e.success?(n.currentUser=e.data,r.sessionStorage.token=n.currentUser.token):delete r.sessionStorage.token,i.resolve(e)}),i.promise},o.logoutUser=function(){var o=e.defer();return t.post("/auth/logout",{logout:!0}).success(function(e){e.success&&(delete n.currentUser,delete r.sessionStorage.token),o.resolve(e)}),o.promise}}]),AngularApp.service("IdentityService",function(){var e=this;e.currentUser=void 0,e.isAuthenticated=function(){return!!e.currentUser}}),AngularApp.service("ApiService",["$http","ConstantsService",function(e,r){var t=this,n=r.apiBaseUrl,o=function(){for(var r=0;r<arguments.length;r++){var o=arguments[r];t[o]=function(r){return function(t,o){return e[r](n+t,o)}}(o)}},s=function(){for(var r=0;r<arguments.length;r++){var o=arguments[r];t[o]=function(r){return function(t,o,s){return e[r](n+t,o,s)}}(o)}};o("get","delete","head","jsonp"),s("post","put","patch")}]),AngularApp.service("SemesterService",function(){function e(e){e=e||r.getCurrentSemester();var t=n.indexOf(e);if(0>t)throw new Errors("Current semester provided is invalid.");return t}var r=this,t={spring:"SPRING",summer:"SUMMER",fall:"FALL",winter:"WINTER"},n=[t.spring,t.summer,t.fall,t.winter];r.getCurrentSemester=function(){return r.getSemesterFromDate()},r.getNextSemester=function(r){var t=e(r);return t===n.length-1?n[0]:n[t+1]},r.getPrevSemester=function(r){var t=e(r);return 0===t?n[n.length-1]:n[t-1]},r.getSemesterFromDate=function(e){e=e||new Date;var r=e.getMonth();return 0===r?t.winter:r>=1&&4>=r?t.spring:r>=5&&7>=r?t.summer:r>=8&&11>=r?t.summer:void 0}}),AngularApp.service("ModalService",["$q","$http","$compile","$rootScope",function(e,r,t,n){var o=this,s=function(e,r){var t=this;t.element=e,t.state="default",t.onOpen=r.onOpen,t.onClose=r.onClose,t.element.modal({show:!1}),t.element.width(r.width),t.element.on("show",function(){t.element.css("margin-left",-(t.element.width()/2)),t.onOpen&&t.onOpen()}),t.element.on("hidden",function(){t.onClose&&t.onClose()}),t.open=function(){t.element.modal("show")},t.close=function(){t.element.modal("hide")}};o.createModal=function(o,i){var a=e.defer();return r.get(o).success(function(e){var r=angular.element(e),o=n.$new(!0);t(r)(o),angular.element("#content-container").append(r);var l=new s(r,i||{width:600});a.resolve(l)}),a.promise},o.modals={},o.waitUntilReady=function(r){var t=e.defer(),s=n.$watch(function(){return!!o.modals[r]},function(){t.resolve(o.modals[r]),s()});return t.promise},o.initGlobalModals=function(){}}]),AngularApp.service("ConfigService",["$http",function(e){var r=this;r.getAppMeta=function(){return e.get("assets/js/angular/meta.json")}}]),AngularApp.service("ConstantsService",function(){var e=this;e.apiBaseUrl="http://localhost:3960"}),AngularApp.component("registerComponent",{controller:"RegisterController as Login",templateUrl:"templates/app/auth/register/Register.template.html"}),AngularApp.controller("RegisterController",["$scope","$state","AuthService","IdentityService","ModalService","toastr",function(e,r,t,n,o,s){var i=this;i.user={},i.register=function(){return i.user.email&&i.user.password?void t.registerUser(i.user).then(function(e){return e.success?(r.go("login"),void s.success("Thanks for signing up "+i.user.email)):void s.error(e.message)}):void s.error("Both email and password needs to be provided.")}}]),AngularApp.config(["$stateProvider",function(e){e.state("register",{url:"/register",templateUrl:"views/auth/register/index.html",onEnter:["$rootScope",function(e){e.PageName="Register"}]})}]),AngularApp.component("loginComponent",{controller:"LoginController as Login",templateUrl:"templates/app/auth/login/Login.template.html"}),AngularApp.controller("LoginController",["$scope","$state","AuthService","IdentityService","ModalService","toastr",function(e,r,t,n,o,s){var i=this;i.login=function(){return i.email&&i.password?void t.loginUser(i.email,i.password).then(function(e){return e.success?(r.go("home"),void s.success("Welcome back "+IdentitySvc.currentUser.email)):void s.error(e.message)}):void s.error("Both email and password needs to be provided.")}}]),AngularApp.config(["$stateProvider",function(e){e.state("login",{url:"/login",templateUrl:"views/auth/login/index.html",onEnter:["$rootScope",function(e){e.PageName="Login"}]})}]),AngularApp.component("loadingDockComponent",{controller:"LoadingDockController as LoadingDock",templateUrl:"templates/app/schedule/loading-dock/LoadingDock.template.html"}),AngularApp.controller("LoadingDockController",["$scope",function(e){}]),AngularApp.controller("ScheduleController",["$scope","SemesterService",function(e,r){var t=this;t.currentSemester=r.getCurrentSemester(),t.getNextSemester=function(){t.currentSemester=r.getNextSemester(t.currentSemester)},t.getPrevSemester=function(){t.currentSemester=r.getPrevSemester(t.currentSemester)}}]),AngularApp.config(["$stateProvider",function(e){e.state("schedule",{url:"/schedule",templateUrl:"views/schedule/index.html",onEnter:["$rootScope",function(e){e.PageName="Schedule"}]})}]),angular.module("AngularApp").run(["$templateCache",function(e){e.put("templates/app/auth/login/Login.template.html",'<div class="clearfix">\r\n    <h2 class="page-header">Log In</h2>\r\n\r\n    <form class="form-horizontal clearfix col-xs-10 col-xs-offset-1" ng-submit="Login.login()" novalidate>\r\n        <div class="form-group">\r\n            <label for="email" class="required">Email</label>\r\n            <input type="email" class="form-control" id="email" ng-model="Login.email" required>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="password" class="required">Password</label>\r\n            <input type="password" class="form-control" id="password" ng-model="Login.password" required>\r\n        </div>\r\n        <div class="form-group">\r\n            <button type="submit" class="btn btn-block btn-primary">\r\n                <span class="fa fa-sign-in"></span>\r\n                Login\r\n            </button>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="text-center">\r\n                <h4>\r\n                    <a ui-sref="register">Don\'t have an account? Sign up.</a>\r\n                </h4>\r\n            </div>\r\n            <div class="text-center">\r\n                <a>Forgot Password?</a>\r\n            </div>\r\n        </div>\r\n        <br>\r\n    </form>\r\n</div>'),e.put("templates/app/auth/register/Register.template.html",'<div class="clearfix">\r\n    <h2 class="page-header">Sign Up</h2>\r\n\r\n    <form class="form-horizontal clearfix col-xs-10 col-xs-offset-1" ng-submit="Register.register()" novalidate>\r\n        <div class="form-group">\r\n            <label for="email" class="required">Email</label>\r\n            <input type="email" class="form-control" id="email" ng-model="Register.user.email" required autofocus>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="password" class="required">Password</label>\r\n            <input type="password" class="form-control" id="password" ng-model="Register.user.password" required>\r\n        </div>\r\n        <div class="form-group">\r\n            <button type="submit" class="btn btn-block btn-primary">\r\n                <span class="fa fa-sign-in"></span>\r\n                Sign Up\r\n            </button>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="text-center">\r\n                <h4>\r\n                    <a ui-sref="login">Already have an account? Log in.</a>\r\n                </h4>\r\n            </div>\r\n        </div>\r\n        <br>\r\n    </form>\r\n</div>'),e.put("templates/app/schedule/loading-dock/LoadingDock.template.html",'<div class="loading-dock-container clearfix">\r\n    <div class="panel panel-default card" ng-repeat="i in [].constructor(10) track by $index">\r\n        <div class="panel-body">\r\n            <span class="panel-title">Class {{$index}}</span>\r\n        </div>\r\n    </div>\r\n</div>')}]);
var AngularApp=angular.module("AngularApp",["ngSanitize","ngAnimate","ngMessages","ui.router","ui.bootstrap","toastr"]);AngularApp.config(function(e){e.defaults.withCredentials=!0,e.interceptors.push(function(e){return{responseError:function(n){404===n.status&&e.path("/error/404")}}})}),AngularApp.config(function(e){e.autoDismiss=!0,e.positionClass="toast-bottom-center",e.preventOpenDuplicates=!0}),AngularApp.config(function(e,n,t){t.html5Mode(!1),e.state("home",{url:"/",templateUrl:"views/home/index.html"}),e.state("error",{url:"/error/:status",templateUrl:function(e){return"views/error/"+e.status+".html"}})}),AngularApp.run(function(e,n,t,r,o){n.getAppMeta().then(function(n){e.AppMeta={Name:n.data.name,Version:n.data.version,Description:n.data.description,Copyright:n.data.copyright,Authors:n.data.authors}}),e.PageName="Home",e.IdentitySvc=t,e.AuthSvc=r,e.ModalSvc=o,r.bootstrapSessionUser(),o.initGlobalModals()}),AngularApp.service("AuthSvc",function(e,n,t,r){var o=this;o.bootstrapSessionUser=function(){t.get("/auth/me").success(function(e){e.success&&(r.currentUser=e.data)})},o.registerUser=function(n){var r=e.defer();return t.post("/auth/register",n).success(function(e){r.resolve(e)}),r.promise},o.loginUser=function(o,s){var a=e.defer();return t.post("/auth/login",{email:o,password:s}).success(function(e){e.success?(r.currentUser=e.data,n.sessionStorage.token=r.currentUser.token):delete n.sessionStorage.token,a.resolve(e)}),a.promise},o.logoutUser=function(){var o=e.defer();return t.post("/auth/logout",{logout:!0}).success(function(e){e.success&&(delete r.currentUser,delete n.sessionStorage.token),o.resolve(e)}),o.promise}}),AngularApp.service("IdentitySvc",function(){var e=this;e.currentUser=void 0,e.isAuthenticated=function(){return!!e.currentUser}}),AngularApp.service("ApiSvc",function(e,n){var t=this,r=n.apiBaseUrl,o=function(){for(var n=0;n<arguments.length;n++){var o=arguments[n];t[o]=function(n){return function(t,o){return e[n](r+t,o)}}(o)}},s=function(){for(var n=0;n<arguments.length;n++){var o=arguments[n];t[o]=function(n){return function(t,o,s){return e[n](r+t,o,s)}}(o)}};o("get","delete","head","jsonp"),s("post","put","patch")}),AngularApp.service("ModalSvc",function(e,n,t,r){var o=this,s=function(e,n){var t=this;t.element=e,t.state="default",t.onOpen=n.onOpen,t.onClose=n.onClose,t.element.modal({show:!1}),t.element.width(n.width),t.element.on("show",function(){t.element.css("margin-left",-(t.element.width()/2)),t.onOpen&&t.onOpen()}),t.element.on("hidden",function(){t.onClose&&t.onClose()}),t.open=function(){t.element.modal("show")},t.close=function(){t.element.modal("hide")}};o.createModal=function(o,a){var i=e.defer();return n.get(o).success(function(e){var n=angular.element(e),o=r.$new(!0);t(n)(o),angular.element("#content-container").append(n);var u=new s(n,a||{width:600});i.resolve(u)}),i.promise},o.modals={},o.waitUntilReady=function(n){var t=e.defer(),s=r.$watch(function(){return!!o.modals[n]},function(){t.resolve(o.modals[n]),s()});return t.promise},o.initGlobalModals=function(){}}),AngularApp.service("ConfigSvc",function(e){var n=this;n.getAppMeta=function(){return e.get("angular/meta.json")}}),AngularApp.service("ConstantsSvc",function(){var e=this;e.apiBaseUrl="http://localhost:3960"}),angular.module("AngularApp").run(["$templateCache",function(e){e.put("templates/modal-template.html",'<div class="modal fade">\r\n    <div class="modal-header">\r\n        <button type="button" class="close pull-right" data-dismiss="modal">\r\n            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\r\n        </button>\r\n\r\n        <h4 ng-transclude transclude-from="modal-title">\r\n            Modal Title\r\n        </h4>\r\n    </div>\r\n    <div class="modal-body" ng-transclude transclude-from="modal-body">\r\n        Modal Body\r\n    </div>\r\n</div>')}]);